# 1. 阴阳师脚本

## 1.1. 项目说明

因为玩阴阳师比较多，游戏太肝了，经寮友提醒，就有了写一个辅助挂机脚本的想法。说干就干，然后就写了一个初稿。写完就直接开源了，有兴趣可以去看看对应的git仓库，欢迎提出您宝贵的建议，另外针对一些BUG也希望能够提PR帮忙一起维护，一起成长。

程序的使用示例可以参考这个：[**魂土功能使用文档**](https://gitee.com/chike567/yys_script/blob/master/docs/魂土功能使用文档.md)  

开源的期望如下：  

1. 希望开源之后，可能有道友帮忙一起更新，毕竟处理BUG和优化异常需要比较多的时间进行调试
2. 第一次弄开源协作的模式，所以希望能够比较顺利得进行下去。希望大家多多提意见，例如提PR，message怎么管理，如何打tag，代码BUG，功能优化等等
3. 此程序**免费使用**，但是希望不要都是白嫖党，哈哈，白嫖也没事就是了
4. 暂时实现的功能
   1. **结界突破**，不能更换阵容，锁定指定位置（旧引擎）
   2. **御灵**
   3. **业原火**，可以用彼岸花，火灵铁鼠 + 4狗粮，或者是速刷阵容
   4. **魂土**，[**魂土功能使用文档**](https://gitee.com/chike567/yys_script/blob/master/docs/魂土功能使用文档.md)，单人刷，组队刷
   5. **困28**，单人，组队，这个可以优化的地方还比较多
   6. **自动升级狗粮**，自动升级狗粮，2星->3星，3星->4星
   7. **海国活动每天20次**，自动循环打海国活动20次

> 程序主窗体如下图

![主窗体](https://upload-images.jianshu.io/upload_images/8416343-d766904b07ae2524.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)  

## 1.2. 程序下载

> 普通用户

下载对应的版本信息即可，因为包比较大，所以仅保留最新的5个版本（**当前仅支持windows上使用**）：  

- [v1.0.2](https://gitee.com/chike567/yys_script/blob/master/release/yys_script.v1.0.2.zip)
  - 增加自动升级狗粮
  - 增加海国活动，循环进行每天20次挑战
- [v1.0.1](https://gitee.com/chike567/yys_script/blob/master/release/yys_script.v1.0.1.zip)
  - 修复已知BUG，优化图像识别速度
- [v1.0.0](https://gitee.com/chike567/yys_script/blob/master/release/yys_script.v1.0.0.zip)
  - 支持结界突破，御灵，业原火，魂土，困28

> 开发人员

先要安装对应的第三方库，这个到时候我会把用到的库整合到一个脚本里，简化开发环境的安装。基础要求：**python3环境**。  

> 如何交流？

github地址：<https://github.com/cckiddo/yys_script.git>  
交流方式还没有想好，可以先加寮群  

## 1.3. 主要设计思路

模拟人为在操作过程中的点击以及对点击之后的一系列行为进行的图像变化进行识别，比如在庭院时，识别到探索的灯笼就可以点击进行主地图。然后将一系列的操作进行组合，就形成一个个单个功能。  

1. **界面**，pyqt5，因为封包的时候用到的库比较大，所以打包出来的二进制文件比较大
2. **图像识别**，用的是**autogui**，使用简单。注：并不高效，困28时才慢慢发现的，但是对图像识别不熟悉，加上精力有限，所以就没有去尝试其他的库。

## 1.4. 程序目录介绍

- src, 源代码文件
  - src/ui, 图形化的 pyqt 的图形ui文件
  - screenshot, 程序各个功能的截图
  - main.py
  - mainwin.py, 主窗体文件
  - autogui.py, 各个大模块的基础库，主要涉及获取窗体和比对截图等部分
  - screenshot.py, 配置文件，用来加载不同业务的截图
  - config.py, 配置文件，用来配置标题以及其他后续可配的配置
  - yuhun.py，御魂自动功能的业务逻辑代码
  - chi.py, 业原火业务逻辑代码
  - chapter.py, 困28章节的业务代码
- test, 测试某个逻辑或者功能时测试用的代码文件
- docs， 存放文档
- main.spec: 打包使用的文件
